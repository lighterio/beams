!function(n,t,e,r){var i=(function(){function n(){M('[Beams] Polling for messages at "'+o+'".'),f(o,t,e)}function t(t){a(t,function(n){var t=n[0],e=n[1];s._receive(t,e)}),addTimer(s,n,0)}function e(){addTimer(s,n,u),A('[Beams] Failed to connect to "'+o+'".')}M("[Beams] Initializing client.");var r="/beam",o=r,u=1e3,c=[],s=new L,l=0;return s._receive=s._emit,s._emit=function(n,t){function e(){f(o+"&m="+P(n)+"&n="+l,"d="+P(t),i,function(){setTimeout(e,u)})}return t=S(t||{}),M('[Beams] Emitting "'+n+'": '+t+"."),l++,s._id?e():c.push(e),s},s._on("connect",function(n){s._id=n.id,o=r+"?id="+s._id,M('[Beams] Set endpoint URL to "'+o+'".'),a(c,function(n){n()}),c=[]}),n(),s}(),function(){}),o=i,u=i,c=function(){var t;return t=n.XMLHttpRequest?new XMLHttpRequest:n.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):!1,t=new XMLHttpRequest},f=function(n,t,e,r){F(t)&&(r=e,e=t,t=0);var i=c();return i&&(r=r||u,e=e||o,j(i,function(){M('[Jymin] Received response from "'+n+'". ('+f._waiting+" in progress)."),--f._waiting;var t=i.status,c=200==t,a=c?e||o:r||u,s=q(i.responseText)||{};a(s,i,t)}),i.open(t?"POST":"GET",n,!0),t&&i.setRequestHeader("content-type","application/x-www-form-urlencoded"),i._url=n,t&&(i._body=t),i._time=m(),f._waiting=(f._waiting||0)+1,M('[Jymin] Sending request to "'+n+'". ('+f._waiting+" in progress)."),i.send(t||null)),!0},a=function(n,t){if(n){n=z(n)?I(n):n;for(var e=0,r=s(n);r>e;e++){var i=t(n[e],e,n);if(i===!1)break}return e}},s=function(n){return(n||0).length||0},l=function(n){return s(n)>1},v=function(n,t){return $(n)&&n.push(t),t},d=function(n){return $(n)?n.pop():void 0},p=function(n){return a(arguments,function(t,e){e&&a(t,function(t){v(n,t)})}),n},m=function(n){return n?n.getTime():e.now()},_=function(n,e){return l(arguments)||(e=n,n=t),z(e)?n.getElementById(e):e},g=function(n,t){return y(n,t)[1]},y=function(n,t){for(var e=[n];n=n.parentNode;)v(e,n);if(t){var r=e;e=[],T(t,function(n){r.indexOf(n)>-1&&v(e,n)})}return e},h=function(n){var t=n.className||"";return t.baseVal||t},w=function(n){return h(n).split(/\s+/)},b=function(n,t){var e=w(n);return e.indexOf(t)>-1},T=function(n,e,r){(!e||F(e))&&(r=e,e=n,n=t);var i;if(i=[],D(e,","))a(e,function(t){T(n,t,function(n){v(i,n)})});else if(D(e," ")){var o=e.indexOf(" "),u=e.substr(0,o),c=e.substr(o+1);i=[],T(n,u,function(n){var t=T(n,c);p(i,t)})}else if("#"==e[0]){var f=e.substr(1),s=_(n.ownerDocument||t,f);if(s)for(var l=g(s);l;){if(l===n){i=[s];break}l=g(l)}}else{e=e.split(".");var d=e[0],m=e[1],y=n.getElementsByTagName(d);a(y,function(n){(!m||b(n,m))&&v(i,n)})}return i=n.querySelectorAll(e),r&&a(i,r),i},L=function(){this._events={},this._on||N(L.prototype,O)},O={_on:function(n,t){var e=this,r=e._events,i=r[n]||(r[n]=[]);return i.push(t),e},_once:function(n,t){function e(){t.apply(r,arguments),r._removeListener(n,e)}var r=this;return r._on(n,e),r},_emit:function(n){var t=this,e=t._listeners(n),r=Array.prototype.slice.call(arguments,1);return a(e,function(n){n.apply(t,r)}),t},_listeners:function(n){var t=this,e=t._events[n]||[];return e},_removeListener:function(n,t){var e=this,r=e._listeners(n),i=r.indexOf(t);return i>-1&&r.splice(i,1),e},_removeAllListeners:function(n){var t=this,e=t._events;if(n)delete e[n];else for(n in e)delete e[n];return t}},x="addEventListener",B="attachEvent",E="on",J=function(t,e,r){a(e,function(e){var i=function(e){e=e||n.event;var i=e.target||e.srcElement;3==i.nodeType&&(i=g(i)),r(t,e,i)},o=t._events=t._events||{},u=o[e]=o[e]||[];v(u,r);var c,f=x;t[f]?t[f](e,i,!0):(f=B,c=E+e,t[f]&&t[f](c,i))})},R=function(n,t){if(z(n))n='"'+n.replace(/\n\r"/g,function(n){return"\n"==n?"\\n":"\r"==n?"\\r":'\\"'})+'"';else{if(F(n)||U(n)||null===n)return null;if(n&&G(n)){t=t||[];var e;if(a(t,function(t){t==n&&(e=1)}),e)return null;v(t,n);var r,i,o=[];$(n)?(r="[",i="]",a(n,function(n){v(o,S(n,t))})):(r="{",i="}",H(n,function(n,e){v(o,S(n)+":"+S(e,t))})),d(t),n=r+o.join(",")+i}else n=""+n}return n},S=function(n){var t;t=R(n),t=JSON.stringify(n)},q=function(t){try{var e=n.eval;return e("eval.J="+t),e.J}catch(r){A("[Jymin] Could not parse JS: "+t)}},A=function(){X("error",arguments)},M=function(){X("log",arguments)},X=function(t,e){var r=n.console;r&&r[t]&&r[t].apply(r,e)},H=(t.body,function(n,t){if(n)for(var e in n){var r=t(e,n[e],n);if(r===!1)break}}),N=function(n,t){return n&&t&&H(t,function(t,e){n[t]=e}),n},j=function(e,r){var o=function(){k(e)&&(o=i,n.onload=e.onload=e.onreadystatechange=null,r(e))};J(e,"readystatechange",o),e==t&&J(e,"DOMContentLoaded",o),J(e==t?n:e,"load",o)},k=function(n){return/(4|complete|scriptloaded)$/.test(""+n.tagName+n.readyState)},C=function(n){return z(n)?n:""+n},D=function(n,t){return C(n).indexOf(t)>-1},I=function(n){return C(n).split(",")},P=function(n){return""+encodeURIComponent(""+n)},U=function(n){return"undefined"==typeof n},z=function(n){return"string"==typeof n},F=function(n){return"function"==typeof n},G=function(n){return"object"==typeof n},V=function(n,t){return n instanceof t},$=function(n){return V(n,Array)}}(window,document,Date,location);