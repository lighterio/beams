!function(n){Jymin.doNothing=function(){},Jymin.responseSuccessFn=Jymin.doNothing,Jymin.responseFailureFn=Jymin.doNothing,Jymin.getXhr=function(){var e=n.XMLHttpRequest,i=n.ActiveXObject;return e?new e:i?new i("Microsoft.XMLHTTP"):!1},Jymin.getUpload=function(){var n=Jymin.getXhr();return n?n.upload:!1},Jymin.getResponse=function(n,e,i,t){Jymin.isFunction(e)&&(t=i,i=e,e=0);var r=Jymin.getXhr();return r&&(t=t||Jymin.responseFailureFn,i=i||Jymin.responseSuccessFn,r.onreadystatechange=function(){if(4==r.readyState){Jymin.log('[Jymin] Received response from "'+n+'". ('+Jymin.getResponse._waiting+" in progress)."),--Jymin.getResponse._waiting;var e=r.status,o=200==e,u=o?i||Jymin.responseSuccessFn:t||Jymin.responseFailureFn,s=Jymin.parse(r.responseText)||{};s._status=e,s._request=r,u(s)}},r.open(e?"POST":"GET",n,!0),r.setRequestHeader("x-requested-with","XMLHttpRequest"),e&&r.setRequestHeader("content-type","application/x-www-form-urlencoded"),r._url=n,e&&(r._body=e),r._time=Jymin.getTime(),Jymin.getResponse._waiting=(Jymin.getResponse._waiting||0)+1,Jymin.log('[Jymin] Sending request to "'+n+'". ('+Jymin.getResponse._waiting+" in progress)."),r.send(e||null)),!0},Jymin.forEach=function(n,e){if(n){for(var i=0,t=Jymin.getLength(n);t>i;i++){var r=e(n[i],i,n);if(r===!1)break}return i}},Jymin.each=function(n,e){if(n){for(var i=0,t=Jymin.getLength(n);t>i;i++){var r=e(i,n[i],n);if(r===!1)break}return i}},Jymin.getLength=function(n){return(n||0).length||0},Jymin.getFirst=function(n){return(n||0)[0]},Jymin.getLast=function(n){return(n||0)[Jymin.getLength(n)-1]},Jymin.hasMany=function(n){return Jymin.getLength(n)>1},Jymin.push=function(n,e){return Jymin.isArray(n)&&n.push(e),e},Jymin.pop=function(n){return Jymin.isArray(n)?n.pop():void 0},Jymin.merge=function(n){return Jymin.forEach(arguments,function(e,i){i&&Jymin.forEach(e,function(e){Jymin.push(n,e)})}),n},Jymin.padArray=function(n,e,i){var t=0;if(Jymin.isArray(n)){var r=Jymin.getLength(n);if(r<length){i=Jymin.isUndefined(i)?"":i;for(var o=r;o<length;o++)Jymin.push(n,i),t++}}return t},Jymin.getTime=function(n){return(n||new Date).getTime()},Jymin.getIsoDate=function(n){if(n=n||new Date,n.toISOString)n=n.toISOString();else{var e=/^.*?(\d+) (\w+) (\d+) ([\d:]+).*?$/;n=n.toUTCString().replace(e,function(e,i,t,r,o){return t=Jymin.zeroFill(n.getMonth(),2),o+="."+Jymin.zeroFill(n.getMilliseconds(),3),r+"-"+t+"-"+i+"T"+o+"Z"})}return n},Jymin.formatLongDate=function(n){var e=["January","February","March","April","May","June","July","August","September","October","November","December"];Jymin.isDate(n)?0:n=new Date(+n||n);var i=e[n.getMonth()],t=!0,r=+n.getHours(),o=n.getMinutes();return o=o>9?o:"0"+o,r>12?(t=!1,r-=12):0===r?r=12:0,i+" "+n.getDate()+", "+n.getFullYear()+" at "+r+":"+o+(t?"am":"pm")},Jymin.formatShortDate=function(n){Jymin.isDate(n)?0:n=new Date(+n||n);var e=n.getMonth()+1,i=!0,t=+n.getHours(),r=n.getMinutes();return r=r>9?r:"0"+r,t>12?(i=!1,t-=12):0===t?t=12:0,e+"/"+n.getDate()+"/"+n.getFullYear()%100+" "+t+":"+r+(i?"am":"pm")},Jymin.Emitter=function(){Jymin.Emitter.prototype=Jymin.EmitterPrototype},Jymin.EmitterPrototype={_on:function(n,e){var i=this,t=i._events||(i._events={}),r=t[n]||(t[n]=[]);return r.push(e),i},_once:function(n,e){function i(){e.apply(t,arguments),t._removeListener(n,i)}var t=this;return t._on(n,i),t},_emit:function(n){var e=this,i=e._listeners(n),t=Array.prototype.slice.call(arguments,1);return Jymin.forEach(i,function(n){n.apply(e,t)}),e},_listeners:function(n){var e=this,i=e._events||0,t=i[n]||[];return t},_removeListener:function(n,e){var i=this,t=i._listeners(n),r=t.indexOf(e);return r>-1&&t.splice(r,1),i},_removeAllListeners:function(n){var e=this,i=e._events||{};if(n)delete i[n];else for(n in i)delete i[n];return e}},Jymin.error=function(){Jymin.ifConsole("Jymin.error",arguments)},Jymin.warn=function(){Jymin.ifConsole("Jymin.warn",arguments)},Jymin.info=function(){Jymin.ifConsole("Jymin.info",arguments)},Jymin.log=function(){Jymin.ifConsole("Jymin.log",arguments)},Jymin.trace=function(){Jymin.ifConsole("Jymin.trace",arguments)},Jymin.ifConsole=function(e,i){var t=n.console;t&&t[e]&&t[e].apply(t,i)},Jymin.forIn=function(n,e){if(n)for(var i in n){var t=e(i,n[i],n);if(t===!1)break}},Jymin.forOf=function(n,e){if(n)for(var i in n){var t=e(n[i],i,n);if(t===!1)break}},Jymin.decorateObject=function(n,e){return n&&e&&Jymin.forIn(e,function(e,i){n[e]=i}),n},Jymin.ensureProperty=function(n,e,i){var t=n[e];return t||(t=n[e]=i),t},Jymin.ensureString=function(n){return Jymin.isString(n)?n:""+n},Jymin.contains=function(n,e){return Jymin.ensureString(n).indexOf(e)>-1},Jymin.startsWith=function(n,e){return 0==Jymin.ensureString(n).indexOf(e)},Jymin.trim=function(n){return Jymin.ensureString(n).replace(/^\s+|\s+$/g,"")},Jymin.splitByCommas=function(n){return Jymin.ensureString(n).split(",")},Jymin.splitBySpaces=function(n){return Jymin.ensureString(n).split(" ")},Jymin.decorateString=function(n,e){return n=Jymin.ensureString(n),Jymin.forEach(e,function(e){n=n.replace("*",e)}),n},Jymin.match=function(n,e,i){var t=n.match(e);t&&i.apply(n,t)},Jymin.extractLetters=function(n){return Jymin.ensureString(n).replace(/[^a-z]/gi,"")},Jymin.extractNumbers=function(n){return Jymin.ensureString(n).replace(/[^0-9]/g,"")},Jymin.lower=function(n){return Jymin.ensureString(n).toLowerCase()},Jymin.upper=function(n){return Jymin.ensureString(n).toUpperCase()},Jymin.escape=function(n){return encodeURIComponent(n)},Jymin.unescape=function(n){return decodeURIComponent(n)},Jymin.buildQueryString=function(n){var e=[];return Jymin.forIn(n,function(n,i){e.push(Jymin.escape(n)+"="+Jymin.escape(i))}),e.join("&")},Jymin.getBrowserVersionOrZero=function(n){return match=new RegExp(n+"[ /](\\d+(\\.\\d+)?)","i").exec(navigator.userAgent),match?+Jymin.match[1]:0},Jymin.isType=function(n,e){return typeof n==e},Jymin.isUndefined=function(n){return Jymin.isType(n,"undefined")},Jymin.isBoolean=function(n){return Jymin.isType(n,"boolean")},Jymin.isNumber=function(n){return Jymin.isType(n,"number")},Jymin.isString=function(n){return Jymin.isType(n,"string")},Jymin.isFunction=function(n){return Jymin.isType(n,"function")},Jymin.isObject=function(n){return Jymin.isType(n,"object")},Jymin.isInstance=function(n,e){return n instanceof(e||Object)},Jymin.isArray=function(n){return Jymin.isInstance(n,Array)},Jymin.isDate=function(n){return Jymin.isInstance(n,Date)};var e=1e3,i=function(){function t(){log('[Beams] Polling for messages at "'+a+'".'),getResponse(a,r,o)}function r(n){forEach(n,function(n){var e=n[0],i=n[1];u(e,i)}),addTimeout(i,t,0)}function o(){addTimeout(i,t,e),error('[Beams] Failed to connect to "'+a+'".')}function u(n,e){log('[Beams] Received "'+n+'": '+stringify(e)+"."),forEach(c[n],function(t){isFunction(t)?t.call(i,e):error('[Beams] Handler for "'+n+'" is not a function: '+stringify(t)+".")})}function s(n){i._id=n.id,a=m+"?id="+i._id,log('[Beams] Set endpoint URL to "'+a+'".'),forEach(y,function(n){n()}),y=[]}if(n.Beams=i,i._on)return i;log("[Beams] Initializing client.");var m="/beam",a=m,y=[],c=i._events={},f=!1;onReady(function(){f&&(c=i._events={connect:s}),f=!0}),decorateObject(i,EmitterPrototype);var J=0;return i._on=function(n,e){log('[Beams] Listening for "'+n+'".');var t=c[n]||(c[n]=[]);return push(t,e),i},i._connect=function(n){return i._on("connect",n),i},i._emit=function(n,t){function r(){getResponse(a+"&m="+escape(n)+"&n="+J,"d="+escape(t),doNothing,function(){setTimeout(r,e)})}return t=stringify(t||{},1),log('[Beams] Emitting "'+n+'": '+t+"."),J++,i._id?r():y.push(r),i},i._connect(s),t(),i};n.Beams=i}(window);